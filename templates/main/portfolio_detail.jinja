{% extends "main/base.jinja" %}

{% block content %}

<!-- BACK NAVIGATION -->
<div style="padding-top:72px; background:var(--canvas-2); border-bottom:1px solid var(--rule);">
    <div class="wrap" style="padding:1.5rem 2.5rem;">
        <a href="/portfolyo/" style="display:inline-flex; align-items:center; gap:.6rem; font-family:'DM Mono','Space Mono',monospace; font-size:.75rem; letter-spacing:.15em; color:var(--ink-3); text-decoration:none; text-transform:uppercase; transition:color .2s;">
            <i class="fa-solid fa-arrow-left" style="font-size:.65rem;"></i>
            Portföy
        </a>
    </div>
</div>


<!-- HERO IMAGE -->
<section style="background:var(--canvas-2); border-bottom:1px solid var(--rule); overflow:hidden;">
    <div style="position:relative; height:clamp(280px,46vw,520px); overflow:hidden;">
        <img src="{{ item.image_url }}" alt="{{ item.title }}"
             class="img-zoom"
             style="width:100%; height:100%; object-fit:cover; display:block;">
        <div style="position:absolute; inset:0; background:linear-gradient(to top, rgba(13,11,9,.65) 0%, rgba(13,11,9,.1) 60%, transparent 100%);"></div>

        <!-- Catalogue badge -->
        <div style="position:absolute; bottom:2rem; left:2.5rem; font-family:'DM Mono','Space Mono',monospace; font-size:.65rem; letter-spacing:.22em; color:var(--gold); background:rgba(13,11,9,.8); padding:.4rem 1rem; backdrop-filter:blur(6px); border:1px solid var(--rule);">
            REFERANS &mdash; {{ item.title|upper }}
        </div>
    </div>
</section>


<!-- PROJECT CONTENT -->
<section class="section-pad">
    <div class="wrap">
        <div style="display:grid; grid-template-columns:1fr 380px; gap:5rem; align-items:start;" class="det-grid">

            <!-- LEFT: Main content -->
            <div>
                <div class="label" style="margin-bottom:1.25rem;">Proje Detayı</div>
                <h1 class="display" style="font-size:clamp(2rem,4vw,3.5rem); font-weight:900; line-height:1.08; margin-bottom:2rem;">
                    {{ item.title }}
                </h1>

                <div class="h-rule" style="margin-bottom:2rem;"></div>

                <div style="font-size:.97rem; color:var(--ink-2); line-height:1.95; white-space:pre-line;">{{ item.description }}</div>

                <div style="margin-top:3rem; display:flex; gap:1rem; flex-wrap:wrap;">
                    <button class="btn-gold" data-modal-open="contact-modal" style="cursor:pointer;">
                        <i class="fa-solid fa-paper-plane" style="margin-right:.6rem;"></i>Benzer Proje İste
                    </button>
                    <a href="/portfolyo/" class="btn-ghost">
                        <i class="fa-solid fa-grid-2" style="margin-right:.6rem;"></i>Tüm Referanslar
                    </a>
                </div>
            </div>

            <!-- RIGHT: Sidebar -->
            <div style="position:sticky; top:96px;">

                <div style="border:1px solid var(--rule); background:var(--canvas-2); overflow:hidden;">
                    <div style="height:2px; background:linear-gradient(90deg, var(--gold), var(--gold-lt), var(--gold));"></div>
                    <div style="padding:2rem 1.75rem;">
                        <div class="label" style="margin-bottom:1.5rem; color:var(--gold-lt);">Proje Bilgileri</div>

                        <div style="display:flex; flex-direction:column; gap:1.25rem;">
                            <div style="display:flex; justify-content:space-between; align-items:flex-start; border-bottom:1px solid var(--rule); padding-bottom:1.25rem;">
                                <span style="font-size:.78rem; color:var(--ink-3); font-family:'DM Mono',monospace; letter-spacing:.08em; text-transform:uppercase;">Kategori</span>
                                <span style="font-size:.85rem; color:var(--ink); text-align:right; max-width:58%;">Yazılım Geliştirme</span>
                            </div>
                            <div style="display:flex; justify-content:space-between; align-items:flex-start; border-bottom:1px solid var(--rule); padding-bottom:1.25rem;">
                                <span style="font-size:.78rem; color:var(--ink-3); font-family:'DM Mono',monospace; letter-spacing:.08em; text-transform:uppercase;">Konum</span>
                                <span style="font-size:.85rem; color:var(--ink); text-align:right; max-width:58%;">Türkiye &amp; Uzaktan</span>
                            </div>
                            <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                                <span style="font-size:.78rem; color:var(--ink-3); font-family:'DM Mono',monospace; letter-spacing:.08em; text-transform:uppercase;">Durum</span>
                                <span style="font-size:.85rem; color:var(--gold);">&#9679; Canlı</span>
                            </div>
                        </div>

                        <div class="h-rule" style="margin:1.5rem 0;"></div>

                        <p style="font-size:.82rem; color:var(--ink-3); line-height:1.75; margin-bottom:1.5rem;">
                            Bu projeye benzer bir çözümü siz de almak ister misiniz? Ücretsiz teknik konsültasyon için bize ulaşın.
                        </p>

                        <button class="btn-gold" data-modal-open="contact-modal" style="width:100%; cursor:pointer; justify-content:center;">
                            <i class="fa-solid fa-paper-plane" style="margin-right:.6rem;"></i>Teklif Al
                        </button>
                    </div>
                </div>

            </div>

        </div>
    </div>
    <style>
        @media(max-width:900px){
            .det-grid { grid-template-columns:1fr !important; gap:3rem !important; }
            .det-grid > div:last-child { position:static !important; }
        }
    </style>
</section>


<!-- RELATED STRIP -->
<section class="section-pad-sm bg-alt">
    <div class="wrap">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2.5rem; flex-wrap:wrap; gap:1rem;">
            <div>
                <div class="label" style="margin-bottom:.5rem;">Keşfet</div>
                <h2 class="display" style="font-size:1.5rem; font-weight:700;">Diğer Referanslar</h2>
            </div>
            <a href="/portfolyo/" class="btn-ghost" style="font-size:.8rem;">
                Tümünü Gör <i class="fa-solid fa-arrow-right" style="margin-left:.5rem;"></i>
            </a>
        </div>

        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:1px; background:var(--rule);" class="rel-grid">
            {% for rel in related_items %}
            <a href="{{ rel.get_absolute_url() }}" style="display:block; text-decoration:none; background:var(--canvas-2); overflow:hidden;">
                <div style="aspect-ratio:16/9; overflow:hidden;">
                    <img src="{{ rel.image_url }}" alt="{{ rel.title }}" loading="lazy"
                         style="width:100%; height:100%; object-fit:cover; display:block; transition:transform .55s cubic-bezier(.25,.46,.45,.94);">
                </div>
                <div style="padding:1.25rem 1.25rem 1.5rem;">
                    <div class="display" style="font-size:.95rem; font-weight:700; color:var(--ink); line-height:1.35;">{{ rel.title }}</div>
                </div>
            </a>
            {% else %}
            <!-- fallback if no related_items provided -->
            <div style="background:var(--canvas-2); padding:2.5rem; grid-column:1/-1; text-align:center;">
                <a href="/portfolyo/" class="btn-ghost" style="font-size:.8rem;">
                    Tüm Referansları İncele <i class="fa-solid fa-arrow-right" style="margin-left:.5rem;"></i>
                </a>
            </div>
            {% endfor %}
        </div>
        <style> @media(max-width:768px){ .rel-grid { grid-template-columns:1fr !important; } } </style>
    </div>
</section>

{% endblock %}
